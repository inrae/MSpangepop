Bootstrap: docker
From: python:3.11-slim

%post
    apt-get update && apt-get install -y \
        build-essential \
        libz-dev \
        libbz2-dev \
        liblzma-dev \
        libcurl4-openssl-dev \
        libfreetype6-dev \
        libpng-dev \
        pkg-config \
        libopenblas-dev \
        liblapack-dev \
        gfortran \
    && rm -rf /var/lib/apt/lists/*
    
    pip install --upgrade pip
    pip install msprime tskit pandas h5py numpy matplotlib ipython pyyaml biopython pytest bitarray tskit-arg-visualizer psutil networkx scipy seaborn

%environment
    export PYTHONUNBUFFERED=1
    export MPLBACKEND=Agg

%labels
    maintainer "Lucien Piat"
    description "This image is used for the MSpangepop workflow at INRAe."
    version "VERSION_NUMBER"

%runscript
    exec python "$@"